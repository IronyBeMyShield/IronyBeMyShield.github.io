<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <title>docs</title>
  <link rel="stylesheet" href="https://unpkg.com/docute@3/dist/docute.css">
  <script src="https://unpkg.com/docute@3/dist/docute.js"></script>
</head>
<body>
  <div id="app"></div>
<!-- <script src="https://unpkg.com/papp-polyfill"></script> -->
<!-- <script src="https://unpkg.com/@babel/standalone/babel.js"></script> -->
<!-- <script src="https://unpkg.com/axios/dist/axios.js"></script> -->
<!-- <script src="https://unpkg.com/bluebird"></script> -->
<!-- <script src="https://unpkg.com/lodash"></script> -->
<!-- <script src="https://unpkg.com/archieml"></script> -->
<!-- 
<script>
  docute.init({
  })
</script>

<script type="text/babel" data-presets="es2015,stage-0">

let go = (async () => {
const log = console::console.log
// const log = (v) => console.log(`${[v]}: ${JSON.stringify(v,null,2)}`)
const lt = (t, ...subs) => t |> _.tail |> d => _.reduce(d, (acc, v, i) => {
   console.log({acc, subsI: subs[i], v})
   return acc + `[${_.keys(subs[i])}]\n ${JSON.stringify(_.values(subs[i])[0], null, 2)}` + v
  }, _.head(t)) |> log
const tap = (...args) => { log(...args); return (args) }
const map = (fn) => (array) => array.map(fn)
// const tap = (fn = _.identity) => (...args) => log(fn(...args)) && args
const isThenable = val => val
  && typeof val === 'object'
  && typeof val.then === 'function'

const then = fn => arg =>
  isThenable(arg)
  ? arg.then(fn)
  : fn(arg)
  
  
  let config = (await axios.get('docute.aml')) |> _.property('data') |> archieml.load
  // docute.init(config)
  _.assign(window, {map, tap, log, then, lt, config})
lt`${{config}}`
})
go()
</script> -->

</body>
</html>
